# Vercel Configuration - Alternative to Railway Metal Builder Issues
# Deploy to Vercel if Railway Metal builder continues hanging

# Build settings
buildCommand = "npm run build"
outputDirectory = ".next"
installCommand = "npm ci"

# Environment optimizations
[build.env]
NODE_OPTIONS = "--max-old-space-size=8192"
NEXT_TELEMETRY_DISABLED = "1"
NPM_CONFIG_AUDIT = "false"
NPM_CONFIG_FUND = "false"

# Vercel-specific optimizations
functions = "app/api/**"
framework = "nextjs"

# Deployment regions (multiple for reliability)
regions = ["iad1", "sfo1", "lhr1"]

# Build timeout (Vercel max is 45 minutes)
maxDuration = 45

[headers]
# Security headers
[[headers]]
source = "/(.*)"
headers = [
  { key = "X-Content-Type-Options", value = "nosniff" },
  { key = "X-Frame-Options", value = "DENY" },
  { key = "X-XSS-Protection", value = "1; mode=block" }
]

[rewrites]
# API rewrites for compatibility
[[rewrites]]
source = "/api/(.*)"
destination = "/api/$1"